# Ejercer Turno

## Clases

![Figure1](/docs/imgs/CD_ejercer_turno.png)

_Figure 1. Diagrama de Clase Ejercer Turno_

| Componente        | Definicion                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| DominoDTO         | <p>Data Transfer Object con la información que la vista necesita enviar al Presentador para poder referenciar las interacciones de fichas.</p><ul><li>`leftValue` _int_: Valor izquierdo de la ficha<li>`rightValue` _int_: Valor derecho de la ficha.</ul>                                                                                                                                                                                                                                                                                                                                                                                                        |
| GameView          | <p>Es la interfaz de la Vista, del patrón MVP. <br> Su función es repsentar todos los cambios solicitados por el Presentador, de forma gráfica.</p><ul><li>`showInvalidError():void`: Despliega un mensaje de error.</li><li>`updateGame(GameViewModel model):void`: Actualiza todo el juego, obteniendo la información del Modelo el cual es proporcionado por el Presentador.</li></ul>                                                                                                                                                                                                                                                                          |
| GameJFrame        | <p>Implementación de la interfaz `GameView`, la cual lo hace mediante los JFrame de Java.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| GamePresenter     | <p>Es la interfaz del Presentador, del patrón MVP. <br> Refleja los cambios de información en el Modelo y le dice a la Vista cómo comportarse.</p><ul><li>`putTileInBoard(): void`: Sirve para recibir el cambio de la vista. Aquí el Presentador actualiza al Modelo con la ficha regresada y vuelve a cargar la vista con los datos actualizados.</li></ul>                                                                                                                                                                                                                                                                                                      |
| GamePresenterImpl | Implementación de la interfaz `GamePresenter`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Router            | Es la interfaz intermediaria entre la conexión con el servidor. Esta va a estar observando los cambios más recientes y se lo hará saber al `GamePresenter`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| RouterImpl        | Implementación de la interfaz `Router`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| GameModel         | Interfaz que contiene métodos para actualizar el Modelo, del patrón MVP.<br>El cómo se actuliza es  interactuando con las clases de Dominio, que se ve reflejado en el [Diagrama de Secuencia](#ds-ejercer-turno).<ul><li>`getTileFromPool():DominoDTO`: Obtiene una ficha del pozo, si es que existe. </li><li>`putTileInBoard(DominoDTO):void`: Intenta poner una ficha en el tablero.</li><li>`takeFromPool(PlayerDTO):void`: Intenta agregar una ficha del pozo al jugador, si es que hay restantes.</li><li>`updateGame(GameDTO):void`: Actualiza todo el modelo, este método se suele llamar cuando hay cambios nuevos de fuera i.e. del Servidor.</li></ul> |
| GameViewModel     | Es la versión segregada del Modelo, la cual se va a estar mandando a la Vista.<br>Contiene únicamente métodos para acceder a la información que la vista necesita para ser cargada o actualizada.<ul><li>`getBoard():BoardDTO`: Regresa el tablero del juego.</li><li>`getMyPlayer():PlayerDTO`: Regresa el jugador actual.</li><li>`getRemainingTilesInPool():int`: Regresa las fichas faltantes del pozo.</li><li>`getRoom()`: Regresa los demás jugadores de la sala. </li></ul>                                                                                                                                                                                |
| GameModelImpl     | Esta clase implementa de `GameModel` y de `GameViewModel`. <br>Tiene una referencia de la clases de Dominio `DominoGame` con la información del juego actual y `Player`, que representa al jugador actual (Ver [Clases de Domino](/docs/diagrams/DD_client.md)).                                                                                                                                                                                                                                                                                                                                                                                                   |


## Secuencia

### DS Ejercer Turno

![Figure2](/docs/imgs/SD_ejercer_turno.png)

_Figure 2. Diagrama de Secuencia: Ejercer Turno_

Representa el flujo de información entre las clases de Dominio y las clases relacionadas al patrón MVP al momento de ejercer un turno.

### DS Actualizar Juego

![Figure3](/docs/imgs/SD_update_game.png)

_Figure 3. Diagrama de Secuencia: Actualizar Juego_

Representa el flujo de actualizar la vista con la información del Modelo, del patrón MVP.